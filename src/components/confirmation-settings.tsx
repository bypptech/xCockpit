import React, { useState } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { CheckCircle, Clock, Shield, AlertTriangle } from 'lucide-react';\n\ninterface ConfirmationOption {\n  value: number;\n  label: string;\n  time: string;\n  risk: string;\n  icon: React.ReactNode;\n  description: string;\n  color: 'green' | 'yellow' | 'blue';\n}\n\ninterface ConfirmationSettingsProps {\n  onSelect: (confirmations: number) => void;\n  currentSelection?: number;\n  amount?: string;\n  disabled?: boolean;\n}\n\nexport function ConfirmationSettings({ \n  onSelect, \n  currentSelection = 0,\n  amount,\n  disabled = false\n}: ConfirmationSettingsProps) {\n  const [selectedConfirmations, setSelectedConfirmations] = useState(currentSelection);\n  \n  const getRecommendedConfirmations = (amount?: string): number => {\n    if (!amount) return 0;\n    const numAmount = parseFloat(amount);\n    if (numAmount > 100) return 3;\n    if (numAmount > 10) return 2;\n    return 0;\n  };\n  \n  const recommendedConfirmations = getRecommendedConfirmations(amount);\n  \n  const options: ConfirmationOption[] = [\n    {\n      value: 0,\n      label: \"即時支払い\",\n      time: \"数秒\",\n      risk: \"低額推奨\",\n      icon: <CheckCircle className=\"h-4 w-4\" />,\n      description: \"L2 Included - トランザクションがブロックに含まれた時点で確認\",\n      color: 'green'\n    },\n    {\n      value: 2,\n      label: \"安全確認\",\n      time: \"~30秒\",\n      risk: \"中額推奨\",\n      icon: <Shield className=\"h-4 w-4\" />,\n      description: \"2ブロック確認 - 高い安全性を確保\",\n      color: 'yellow'\n    },\n    {\n      value: 3,\n      label: \"最高安全性\",\n      time: \"~1分\",\n      risk: \"高額推奨\",\n      icon: <AlertTriangle className=\"h-4 w-4\" />,\n      description: \"3ブロック確認 - 最大限の安全性\",\n      color: 'blue'\n    }\n  ];\n  \n  const handleSelect = (confirmations: number) => {\n    setSelectedConfirmations(confirmations);\n    onSelect(confirmations);\n  };\n  \n  const getBadgeVariant = (color: string) => {\n    switch (color) {\n      case 'green': return 'default';\n      case 'yellow': return 'secondary';\n      case 'blue': return 'outline';\n      default: return 'default';\n    }\n  };\n  \n  return (\n    <Card className=\"w-full max-w-2xl\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Clock className=\"h-5 w-5\" />\n          確認数設定\n        </CardTitle>\n        <CardDescription>\n          支払いの安全性レベルを選択してください。高額な取引ほど多くの確認を推奨します。\n          {amount && (\n            <span className=\"block mt-2 font-medium\">\n              取引金額: ${amount} USDC - 推奨: {recommendedConfirmations}確認\n            </span>\n          )}\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {options.map((option) => {\n          const isSelected = selectedConfirmations === option.value;\n          const isRecommended = option.value === recommendedConfirmations;\n          \n          return (\n            <Button\n              key={option.value}\n              variant={isSelected ? 'default' : 'outline'}\n              className={`w-full justify-start h-auto p-4 ${\n                isSelected ? 'ring-2 ring-primary' : ''\n              } ${\n                disabled ? 'opacity-50 cursor-not-allowed' : 'hover:bg-secondary'\n              }`}\n              onClick={() => !disabled && handleSelect(option.value)}\n              disabled={disabled}\n            >\n              <div className=\"flex items-start w-full\">\n                <div className=\"flex items-center gap-3 flex-1\">\n                  <div className={`p-2 rounded-full ${\n                    option.color === 'green' ? 'bg-green-100 text-green-600' :\n                    option.color === 'yellow' ? 'bg-yellow-100 text-yellow-600' :\n                    'bg-blue-100 text-blue-600'\n                  }`}>\n                    {option.icon}\n                  </div>\n                  <div className=\"flex-1 text-left\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"font-medium\">{option.label}</span>\n                      {isRecommended && (\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          推奨\n                        </Badge>\n                      )}\n                      {isSelected && (\n                        <Badge variant=\"default\" className=\"text-xs\">\n                          選択中\n                        </Badge>\n                      )}\n                    </div>\n                    <div className=\"text-sm text-muted-foreground mb-1\">\n                      {option.description}\n                    </div>\n                    <div className=\"flex items-center gap-4 text-xs\">\n                      <span className=\"flex items-center gap-1\">\n                        <Clock className=\"h-3 w-3\" />\n                        {option.time}\n                      </span>\n                      <Badge \n                        variant={getBadgeVariant(option.color)} \n                        className=\"text-xs\"\n                      >\n                        {option.risk}\n                      </Badge>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"font-mono text-lg font-bold\">\n                    {option.value}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    確認\n                  </div>\n                </div>\n              </div>\n            </Button>\n          );\n        })}\n        \n        <div className=\"mt-6 p-4 bg-muted/50 rounded-lg\">\n          <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n            <Shield className=\"h-4 w-4\" />\n            確認数について\n          </h4>\n          <ul className=\"text-sm text-muted-foreground space-y-1\">\n            <li>• <strong>0確認</strong>: トランザクションがブロックに含まれた時点で確認</li>\n            <li>• <strong>2-3確認</strong>: ブロックチェーン再編成のリスクを最小化</li>\n            <li>• Base L2では通常、ブロック生成が2秒間隔で高速処理</li>\n            <li>• 高額取引では安全性を重視した設定を推奨</li>\n          </ul>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}